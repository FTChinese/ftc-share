@import "o-colors/main";
@import "ftc-icons/main";

@include oColorsSetUseCase(tooltip, text, 'white');
@include oColorsSetUseCase(tooltip, background, 'grey-tint5');

$o-share-icon-size: 24px;

/// List of accepted social network icons, and the version
/// @type map
$o-share-icons: (wechat, weibo, linkedin, facebook, twitter, url) !default;

/// Tooltip background
/// @type color

$_o-share-tooltip-height: 22px;
$_o-share-tooltip-arrow-size: 5px;
$_o-share-tooltip-bg: #323232;
$_o-share-tooltip-text: #ecf0f1;

$_o-share-icon-colors: (
	wechat:#609700,
	weibo: #e6162d,
	linkedin:#0977b6,
	facebook: #3c5a99,
	twitter: #6aa9e0,
	link: #27757B
);



/// Generate base share styles
/// @param {String} $classname [o-share] - base class name
@mixin oShareBase($classname: o-share) {
	.#{$classname} {
		display: inline-block;
		ul {
			margin: 0;
			padding: 0;
			list-style-type: none;
			&::after {
			  clear: both;
			  content: "";
			  display: table;
			}
		}
	}
	.#{$classname}__action {
		float: left;
		padding: 0;
		margin: 0 5px 0 0;
		/* line-height: $o-share-icon-size; */
		a {
			float: left;
			text-decoration: none;
			padding: 5px;
			margin: 0;
			border-radius: 3px;
			background-color: #c4c4c4;
			i {
				float: left;
				width: $o-share-icon-size;
				height: $o-share-icon-size;
				//prevent line break so that text inside <i> wouldn't break line and show up.
				white-space: nowrap;
				text-indent: $o-share-icon-size;
				overflow: hidden;
				background-size: 100% 100%;
				background-repeat: no-repeat;
				background-position: 50% 50%;
				
			}
			&:hover {
				background-color: oColorsGetPaletteColor('teal-2');
			}
		}
	}	
}

@mixin oShareActionIcon($name, $classname: o-share) {
	.#{$classname}__action--#{$name} i {
		/* $iconname: "social-" + $name + "-hollow";
		background-image: ftcIconsGetIconDatauri($iconname); */
		$iconname: "social-" + $name;
		background-image: sassvg($iconname, $fillcolor: oColorsGetPaletteColor('white'));
	}
}

@mixin oShareActionIconHollow($name, $classname: o-share) {
	.#{$classname}__action--#{$name} i {
		$iconname: "social-" + $name + "-hollow";
		background-image: sassvg($iconname);
	}
}


/// Action link styles
/// @param {String} $classname [o-share] - base class name
@mixin oShareActionLink($classname: o-share) {
	.#{$classname}__action--url {
		position: relative;
		.#{$classname}-tooltip {
			position: absolute;
			white-space: nowrap;
			top: 50%;
			left: 100%;
			transform: translateY(-50%);
		}
		input {
			float: left;
			border: 0;
			border-radius: 2px;
			padding: 3px 8px;
			font-size: 14px;
			box-shadow: 0 0 3px oColorsGetPaletteColor('grey-tint5');

			&::-ms-clear {
				display: none;
			}
		}		
	}

/* 	[data-o-share--js] .o-share__action--url {
		display: block;
	} */

	.#{$classname}__action--url[aria-selected=true] {
		a {
			margin-right: 5px;
		}

	}
}

//URL icon on ft: http://image.webservices.ft.com/v1/images/raw/ftsocial:link?source=o-share&format=svg
/// Icon
///
/// @param {String} $name - Name of the icon listed in `$_o-share-icons`
/// @param {String} $classname [o-share] - base class name

@mixin oShareVertical($classname: o-share) {
	clear: both;
	margin: 0 0 5px;
}

@mixin oShareLinkTooltip($classname: o-share) {
	.#{$classname}__action {
		a {
			position: relative;
			&::before,
			&::after {
				box-sizing: content-box;
				position: absolute;
				top: 100%;
				left: 50%;
				transform: translateX(-50%);
				visibility: hidden;
			}
			&::before {
				content: '';
				border-color: $_o-share-tooltip-bg;
				border-style: none;
				border: 5px solid transparent;
				border-bottom: 6px solid $_o-share-tooltip-bg;
				margin-top: -4px;
			}
			&::after {
				content: attr(data-link-tooltip);
				border-radius: 3px;
				width: auto;
				height: 22px;
				padding: 11px 11px 0 11px;
				font-size: 13px;
				line-height: 14px;
				white-space: nowrap;
				background-color: $_o-share-tooltip-bg;
				color: $_o-share-tooltip-text;
				margin-top: 7px;
			}
			&:hover:before,
			&:hover:after,
			&:focus:before,
			&:focus:after {
				visibility: visible;
			}
		}
	}
}
body {
	background-color: oColorsGetPaletteColor('pink');
}
@include oShareBase();
@include oShareActionLink();
@include oShareLinkTooltip();
@each $icon in $o-share-icons {
	@include oShareActionIcon($icon);
}

.o-share-inversed {
	.o-share__action {
		a {
			padding: 0;
		}
		i {
			width: 30px;
			height: 30px;
		}
	}
	@each $icon in $o-share-icons {
		@include oShareActionIconHollow($icon);
	}
}




/* #c4c4c4
#00B285 */



/*.o-share-tooltip__text {
	padding: 8px 20px;
	white-space: nowrap;
	font-weight: normal;
	font-size: 14px;
	line-height: 14px;
	text-align: center;
	color: oColorsGetColorFor(tooltip, text);
	background-color: oColorsGetColorFor(tooltip, background);
	background-color: $_o-share-tooltip-bg;
	text-shadow: 0 0 1px oColorsGetPaletteColor('black');
}
.o-share-tooltip__arrow {
	position: relative;
	left: 50%;
	margin-left: -16px;
	width: 0;
	height: 0;
	border-left: 10px solid rgba(0, 0, 0, 0);
	border-right: 10px solid rgba(0, 0, 0, 0);
	border-top: 10px solid $_o-share-tooltip-bg;
} */